<!DOCTYPE html><html lang="pt"><head><meta charSet="utf-8"/><meta name="description" content="Blog Yudi Yamane"/><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title> Como ler do sistema de arquivos de um jeito organizado em C </title><meta name="description" content="Usando getcwd, strcat e strstr"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/github-dark.min.css"/><meta name="next-head-count" content="5"/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/blog/_next/static/chunks/polyfills-a40ef1678bae11e696dba45124eadd70.js"></script><script src="/blog/_next/static/chunks/webpack-d5cba7b40139ad0e.js" defer=""></script><script src="/blog/_next/static/chunks/framework-91d7f78b5b4003c8.js" defer=""></script><script src="/blog/_next/static/chunks/main-c49c0467e5b05e2b.js" defer=""></script><script src="/blog/_next/static/chunks/pages/_app-95326f6d671efe55.js" defer=""></script><script src="/blog/_next/static/chunks/pages/posts/%5Bid%5D-546f35a6fa935227.js" defer=""></script><script src="/blog/_next/static/kOqEUSmO-VoyaZNgwXGXu/_buildManifest.js" defer=""></script><script src="/blog/_next/static/kOqEUSmO-VoyaZNgwXGXu/_ssgManifest.js" defer=""></script><script src="/blog/_next/static/kOqEUSmO-VoyaZNgwXGXu/_middlewareManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.3">:root{font-size:16px;--color-fg-default:#c9d1d9;--color-fg-muted:#8b949e;--color-fg-subtle:#484f58;--color-canvas-default:#0d1117;--color-canvas-subtle:#161b22;--color-border-default:#30363d;--color-border-muted:#21262d;--color-neutral-muted:rgba(110,118,129,0.4);--color-accent-fg:#58a6ff;--color-accent-emphasis:#1f6feb;--color-danger-fg:#f85149;--color-header-bg:#161b22;--color-header-text:rgba(240,246,252,0.7);--color-header-logo:#f0f6fc;}/*!sc*/
*{margin:0;padding:0;box-sizing:border-box;outline:0;}/*!sc*/
html{overflow-y:overlay;}/*!sc*/
body{background:var(--color-canvas-default);color:var(--color-fg-default);-webkit-font-smoothing:antialiased;}/*!sc*/
body,input,button{font-family:Roboto,sans-serif;font-size:16px;}/*!sc*/
h1,h2,h3,h4,h5,h6,strong{font-weight:bold;}/*!sc*/
h1{font-size:2.25rem;}/*!sc*/
h2{font-size:1.5rem;}/*!sc*/
h3{font-size:1rem;}/*!sc*/
button{cursor:pointer;}/*!sc*/
a{color:var(--color-accent-fg);-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
a:hover{-webkit-text-decoration:underline;text-decoration:underline;}/*!sc*/
data-styled.g1[id="sc-global-bOvFXg1"]{content:"sc-global-bOvFXg1,"}/*!sc*/
.bWbqvd{background:var(--color-header-bg);color:var(--color-header-logo);height:64px;width:100vw;}/*!sc*/
data-styled.g2[id="sc-bdvvtL"]{content:"bWbqvd,"}/*!sc*/
.dapBTY{font-size:1.2rem;width:90%;height:100%;margin:0 auto;}/*!sc*/
.dapBTY ul{height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:left;-webkit-justify-content:left;-ms-flex-pack:left;justify-content:left;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;list-style:none;}/*!sc*/
.dapBTY ul li + li{margin-left:32px;}/*!sc*/
.dapBTY ul li a{color:var(--color-header-logo);font-weight:600;-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
@media (min-width:650px){.dapBTY{max-width:calc(800px - (30px * 2));}}/*!sc*/
data-styled.g3[id="sc-gsDKAQ"]{content:"dapBTY,"}/*!sc*/
.cpLhLY{width:100vw;max-width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}/*!sc*/
data-styled.g11[id="sc-pVTFL"]{content:"cpLhLY,"}/*!sc*/
.dukZvK{margin:8% auto;width:90%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;line-height:1.5;}/*!sc*/
@media (min-width:650px){.dukZvK{max-width:calc(800px - (30px * 2));}}/*!sc*/
.dukZvK h1{margin-bottom:4px;}/*!sc*/
.dukZvK h2,.dukZvK h3{margin-bottom:16px;margin-top:8px;}/*!sc*/
.dukZvK p{font-size:1em;margin-bottom:16px;}/*!sc*/
.dukZvK li > p{margin-top:16px;}/*!sc*/
.dukZvK li + li{margin-top:0.25em;}/*!sc*/
.dukZvK code{background:var(--color-canvas-subtle);border-radius:6px;font-size:95%;padding:0px 0.4em;}/*!sc*/
.dukZvK pre code{font-size:0.9rem;}/*!sc*/
.dukZvK pre{background:var(--color-canvas-subtle);overflow:auto;padding:16px;border-radius:6px;font-size:12px;margin-top:0;margin-bottom:16px;}/*!sc*/
.dukZvK kbd{display:inline-block;padding:3px 5px;font:11px ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas, Liberation Mono,monospace;line-height:10px;color:var(--color-fg-default);vertical-align:middle;background-color:var(--color-canvas-subtle);border:solid 1px var(--color-neutral-muted);border-bottom-color:var(--color-neutral-muted);border-radius:6px;box-shadow:inset 0 -1px 0 var(--color-neutral-muted);}/*!sc*/
.dukZvK a{margin-top:16px;}/*!sc*/
.dukZvK a:last-of-type{margin-bottom:32px;}/*!sc*/
.dukZvK ul,.dukZvK ol{margin-top:0;margin-bottom:16px;padding-left:2em;}/*!sc*/
.dukZvK blockquote{margin:0;padding:0 1em;color:var(--color-fg-muted);border-left:0.25em solid var(--color-border-default);}/*!sc*/
.dukZvK h1,.dukZvK h2,.dukZvK h3,.dukZvK h4,.dukZvK h5,.dukZvK h6{margin-top:24px;margin-bottom:16px;line-height:1.25;}/*!sc*/
data-styled.g12[id="sc-jrQzAO"]{content:"dukZvK,"}/*!sc*/
.iDUbet{display:block;width:100%;height:100%;color:var(--color-fg-muted);margin-bottom:16px;}/*!sc*/
.iDUbet time,.iDUbet small{font-size:1em;}/*!sc*/
.iDUbet small{position:relative;margin-left:8px;}/*!sc*/
.iDUbet small::before{left:-6px;top:5%;content:'';position:absolute;width:1px;height:1em;background:var(--color-fg-muted);color:var(--color-fg-muted);}/*!sc*/
@media (min-width:650px){.iDUbet small::before{top:4%;}}/*!sc*/
data-styled.g13[id="sc-kDTinF"]{content:"iDUbet,"}/*!sc*/
.fXEOMs{background:transparent;display:inline;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;border:none;}/*!sc*/
data-styled.g14[id="sc-iqseJM"]{content:"fXEOMs,"}/*!sc*/
</style></head><body><div id="__next"><nav class="sc-bdvvtL bWbqvd"><div class="sc-gsDKAQ dapBTY"><ul><li><a href="/blog">Blog</a></li><li><a href="/blog/tags">Tags</a></li><li><a href="/blog/about">Sobre</a></li></ul></div></nav><div class="sc-pVTFL cpLhLY"><article class="sc-jrQzAO dukZvK"><button class="sc-iqseJM fXEOMs"><a>← Voltar</a></button><h1> <!-- -->Como ler do sistema de arquivos de um jeito organizado em C<!-- --> </h1><div class="sc-kDTinF iDUbet"><time> <!-- -->2021-12-19<!-- --> </time><small> <!-- -->c, sistema-de-arquivos</small></div><div><h2>Pré-requisitos</h2>
<ul>
<li>Ambiente Linux com GCC</li>
<li>Conhecimento de ponteiros e strings em C</li>
</ul>
<p>Aprendizados:</p>
<ul>
<li><code>getcwd</code></li>
<li><code>strcat</code></li>
<li><code>strstr</code></li>
</ul>
<h2>Poblema</h2>
<p>Para a disciplina de Estrutura de Dados 2 (EDA2), eu tenho um
<a href="https://github.com/yudi-azvd/eda2/">repositório</a> com uma estrutura relativamente
complexa para um "projeto" em C. Esse repositório vive no meu computador na
pasta <code>/home/yudi/&#x3C;vários diretórios>/eda2/</code>, mais ou menos com o seguinte conteúdo:</p>
<pre><code>.
├── ... outros arquivos como .gitignore, README.md, etc
├── 00-revisao/
├── 01-sorting/
├── 02-hash/
├── 04-trees/
├── 05-heap/
├── 06-graph
│   ├── _exercises/
│   └── list-und-graph
│       ├── listundgraph.h
│       └── _tests
│           ├── listundgraph.test.cpp
│           └── ...
└── resources
    └── algs4-data
        ├── tinyG.txt
        ├── tinyCG.txt
        └── ... outros vários arquivos com amostras de dados
</code></pre>
<p>Em um dos exercícios do livro, eu tinha que criar um
"<a href="https://pt.wikipedia.org/wiki/Construtor">construtor</a>" que recebe o caminho
de um arquivo para criar e preencher o grafo, com uma assinatura assim:</p>
<pre><code class="hljs language-c">ListUndGraph *<span class="hljs-title hljs-function">ListUndGraph_create_from_file</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *filepath)</span>
</code></pre>
<p>Que é chamada nos arquivos em <code>06-graph/list-und-graph/_tests/</code> ou
em <code>06-graph/_exercises/</code>.</p>
<h2>Primeiras soluções</h2>
<p>A primeira solução que pensei foi a de passar o caminho relativo para o construtor,
algo como <code>"../../../../resources/algs4-data/tinyG.txt"</code>. A quantidade de <code>../</code>
varia de acordo com o lugar de onde <code>ListUndGraph_create_from_file</code> é chamado.
Essa é uma solução viável, mas um tanto incoveniente. O código cliente fica feio
com muitos <code>../</code> e é chato para o programador ficar "calculando" essa quantidade.</p>
<p>Outra solução seria passar o caminho absoluto para o construtor. No meu computador,
por exemplo, esse caminho poderia ser
<code>"/home/yudi/uni/eda2/resources/algs4-data/tinyG.txt"</code>. Essa solução, entretanto,
traz mais restrições:</p>
<ul>
<li>Se por acaso eu precisar mudar o repositório de lugar no meu computador, esse
caminho absoluto já não valeria mais</li>
<li>Se outra pessoa baixar esse repositório no computador dela, esse caminho absoluto
faria menos sentido ainda. Ela teria que ter um username igual a <code>yudi</code> e
baixar o repositório em <code>~/uni/</code></li>
<li>Essa solução polui o projeto com informações do sistema de arquivos que estão
fora do repositório e não importam pra ele.</li>
</ul>
<h2>Uma solução melhor</h2>
<p><em>Ao meu ver pelo menos.</em></p>
<p>Para o cliente, seria interessante se a chamada do construtor fosse algo assim:</p>
<pre><code class="hljs language-c">ListUndGraph *g = ListUndGraph_create_from_file(<span class="hljs-string">"algs4-data/tinyG.txt"</span>);
</code></pre>
<p>Dessa maneira, o construtor recebe apenas o <em>caminho relativo</em> para o arquivo a
partir de <code>resources/</code> e ele se encarrega de resolver o <em>caminho absoluto</em> até a
pasta <code>resources/</code> ou de chamar alguém que sabe fazê-lo.</p>
<p>Vamos optar por criar a função <code>void get_res_dir(char *res_dir)</code> que preenche
<code>res_dir</code> com o caminho absoluto até <code>resources/</code> e é usada pelo construtor. Como
bônus, ela ainda pode ser usada por outras funções de qualquer lugar do repositório
e sua lógica pode ser reaproveitada em outros projetos.</p>
<p>Como vamos colocar <code>get_res_dir</code> em seu próprio arquivo de cabeçalho (<code>.h</code>), ele
precisa ser incluído por quem quer usá-lo. Infelizmente, o problema da quantidade
<code>../</code> volta aqui na hora de usar <code>#include "../../../get_res_dir.h"</code>. Isso pode
ser resolvido com um Makefile ou com um gerador de build system. Configurando
essas ferramentas apropriadamente, a compilação por debaixo dos panos aconteceria
mais ou menos assim:</p>
<pre><code class="hljs language-sh"><span class="hljs-comment"># essa quantidade de "../" é apenas para ilustração.</span>
gcc -I<span class="hljs-string">"../../../../get_res_dir.h"</span> listundgraph.test.cpp -o listundgraph.test.out
</code></pre>
<p>Assim seria possível incluir a função apenas com</p>
<pre><code class="hljs language-c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"get_res_dir.h"</span></span>
</code></pre>
<p>Eu teria que pesquisar mais pra configurar essas ferramentas apropriadamente, mas
durante o curso de EDA2 eu não achei necessário fazer o setup de Make ou CMake
para esses exercícios simples <del>por preguiça ou falta de paciência pra aprender</del>.
Ainda assim, vale ressaltar que essa estratégia seria mais adequada em um projeto
C/C++ de verdade .</p>
<h2>Super pseudocódigo</h2>
<pre><code class="hljs language-cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">get_res_dir</span><span class="hljs-params">(<span class="hljs-type">char</span>* res_dir)</span> </span>{
  <span class="hljs-comment">// pegar caminho absoluto do diretório onde o programa está sendo executado</span>
  <span class="hljs-comment">//    exemplo: "/home/yudi/uni/eda2/06-graph/list-und-graph/_tests/"</span>
  <span class="hljs-comment">// pegar a substring do caminho absoluto até "eda2"</span>
  <span class="hljs-comment">//   substr: "/home/yudi/uni/eda2/"</span>
  <span class="hljs-comment">// concatenar a substring com "resources/"</span>
  <span class="hljs-comment">//   resultado: "/home/yudi/uni/eda2/resources/"</span>
  <span class="hljs-comment">// (esse resultado deve estar em res_dir no final da função)</span>
}
</code></pre>
<h2>Implementação de <code>get_res_dir</code></h2>
<p>Para pegar o caminho absoluto do diretório eu pesquisei extamente isso no Google.
Como estou programando em ambiente Linux, a função que foi recomendada foi
<code>char* getcwd(char* buf, size_t size)</code> (get current working directory) do cabeçalho
<code>unistd.h</code>. De acordo com as
<a href="https://man7.org/linux/man-pages/man3/getcwd.3.html">páginas do manual</a>, ela retorna
o diretório em <code>buf</code>, que deve apontar para um espaço previamente alocado.</p>
<p>Executando a essa função no meu computador no diretório
<code>/home/yudi/uni/eda2/06-graph/list-und-graph/_tests/</code>, ela retorna exatamente isso.
Por prevenção, vamos usar um buffer com o tamanho máximo.</p>
<pre><code class="hljs language-c">getcwd(res_dir, PATH_MAX);
</code></pre>
<p>Agora precisamos apenas de uma substring disso tudo: <code>"/home/yudi/uni/eda2"</code>. Como
diretório raíz do repositório, podemos usar a string <code>"eda2"</code> para extrair a
substring de interesse. É uma suposição razoável porque é o nome do repositório
e dificilmente vai mudar. Uma solução mais robusta, talvez, seria procurar o próximo
diretório pai com a pasta <code>.git</code>, mas não vamos por esse caminho nesse post.</p>
<p>Para extrair a substring, vamos usar a função</p>
<pre><code class="hljs language-c"><span class="hljs-type">char</span>* <span class="hljs-title hljs-function">strstr</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *haystack, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *needle)</span>
</code></pre>
<p>Que encontra a primeira ocorrência de <code>needle</code> em <code>haystack</code> e retorna o ponteiro
que aponta para onde <code>needle</code> foi encontrado.</p>
<pre><code class="hljs language-c"><span class="hljs-type">const</span> <span class="hljs-type">char</span> *root_dir_name = <span class="hljs-string">"eda2"</span>;
<span class="hljs-type">char</span> *root_dir_ptr = <span class="hljs-built_in">strstr</span>(res_dir, root_dir_name);
</code></pre>
<p>Agora <code>root_dir_ptr</code> aponta para a string <code>"eda2/06-graph/list-und-graph/_tests"</code>.
Vale ressaltar que não há cópias de strings, <code>root_dir_ptr</code> apenas aponta para
uma região de memória alguns bytes à frente da região de memória apontada por
<code>res_dir</code>, conforme a ilustração abaixo:</p>
<pre><code>/home/yudi/uni/eda2/06-graph/list-und-graph/_tests/
↑              ↑
res_dir        root_dir_ptr
</code></pre>
<p>Como não precisamos de nada que vem depois de <code>"eda2/"</code>, podemos desconsiderar
essa parte colocando o terminador de string <code>'\0'</code>.</p>
<pre><code class="hljs language-c">*(root_dir_ptr + <span class="hljs-built_in">strlen</span>(root_dir_name)) = <span class="hljs-string">'\0'</span>;
</code></pre>
<p>Agora <code>res_dir</code> aponta para</p>
<pre><code>                   Note o '\0', antes era um '/'
                   ↓
/home/yudi/uni/eda2\006-graph/list-und-graph/_tests/
↑              ↑
res_dir        root_dir_ptr

</code></pre>
<p>Que é o mesmo que:</p>
<pre><code>
/home/yudi/uni/eda2
↑              ↑
res_dir        root_dir_ptr
</code></pre>
<p>Agora só precisamos concatenar <code>"/resources"</code> ao final de <code>res_dir</code>:</p>
<pre><code class="hljs language-c"><span class="hljs-type">const</span> <span class="hljs-type">char</span> *res = <span class="hljs-string">"/resources"</span>;
<span class="hljs-built_in">strcat</span>(res_dir, res);
</code></pre>
<p>Juntando tudo, a função <code>get_res_dir</code> fica assim:</p>
<pre><code class="hljs language-c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&#x3C;unistd.h></span>       <span class="hljs-comment">// getcwd</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&#x3C;linux/limits.h></span> <span class="hljs-comment">// PATH_MAX</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&#x3C;string.h></span>       <span class="hljs-comment">// strstr, strcat, strlen</span></span>

<span class="hljs-comment">// Preenche RES_DIR com "/.../eda2/resources".</span>
<span class="hljs-comment">// "..." é o caminho absoluto até "eda2/".</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">// RES_DIR deve ser um buffer com PATH_MAX bytes.</span>
<span class="hljs-type">void</span> <span class="hljs-title hljs-function">get_res_dir</span><span class="hljs-params">(<span class="hljs-type">char</span> *res_dir)</span>
{
  getcwd(res_dir, PATH_MAX);
  <span class="hljs-type">const</span> <span class="hljs-type">char</span> *root_dir_name = <span class="hljs-string">"eda2"</span>;
  <span class="hljs-type">char</span> *root_dir_ptr = <span class="hljs-built_in">strstr</span>(res_dir, root_dir_name);
  *(root_dir_ptr + <span class="hljs-built_in">strlen</span>(root_dir_name)) = <span class="hljs-string">'\0'</span>;
  <span class="hljs-type">const</span> <span class="hljs-type">char</span> *res = <span class="hljs-string">"/resources"</span>;
  <span class="hljs-built_in">strcat</span>(res_dir, res);
}
</code></pre>
<h2>Implementação de <code>ListUndGraph_create_from_file</code></h2>
<p>Agora só falta implementar o construtor de grafos. Vamos alocar um espaço para
o caminho absoluto.</p>
<pre><code class="hljs language-cpp"><span class="hljs-type">char</span> full_filepath[PATH_MAX]; <span class="hljs-comment">// com lixo de memória por enquanto</span>
</code></pre>
<p>Executando a função <code>get_res_dir</code> com <code>full_filepath</code> obtemos o seguinte:</p>
<pre><code class="hljs language-cpp"><span class="hljs-built_in">get_res_dir</span>(full_filepath);
<span class="hljs-comment">// full_filepath: "/home/yudi/uni/eda2/resources"</span>
</code></pre>
<p>Para terminar, precisamos acrescentar uma <code>"/"</code> e o caminho relativo do arquivo
que foi passado a <code>ListUndGraph_create_from_file</code>. Vamos supor que esse caminho
relativo é <code>"algs4-data/tinyG.txt"</code>.</p>
<pre><code class="hljs language-c"><span class="hljs-comment">// full_filepath: "/home/yudi/uni/eda2/resources"</span>
<span class="hljs-built_in">strcat</span>(full_filepath, <span class="hljs-string">"/"</span>);
<span class="hljs-comment">// full_filepath: "/home/yudi/uni/eda2/resources/"</span>
<span class="hljs-built_in">strcat</span>(full_filepath, filepath);
<span class="hljs-comment">// full_filepath: "/home/yudi/uni/eda2/resources/algs4-data/tinyG.txt"</span>
</code></pre>
<p>O código do construtor fica assim:</p>
<pre><code class="hljs language-c">ListUndGraph *<span class="hljs-title hljs-function">ListUndGraph_create_from_file</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *filepath)</span>
{
  <span class="hljs-type">char</span> full_filepath[PATH_MAX];
  get_res_dir(full_filepath);
  <span class="hljs-built_in">strcat</span>(full_filepath, <span class="hljs-string">"/"</span>);
  <span class="hljs-built_in">strcat</span>(full_filepath, filepath);

  <span class="hljs-comment">// restante do código para preencher o grafo</span>
}
</code></pre>
<h2>Possíveis melhorias</h2>
<p>Ainda seria possível deixar <code>ListUndGraph_create_from_file</code> mais interessante,
criando uma função que faz o equivalente às últimas três linhas do trecho
anterior.</p>
<p>Outra melhoria seria deixar esse código um pouco mais cross-platform, ou seja,
que funcione melhor independentemente do sistema operacional. O cabeçalho
<code>unistd.h</code> não existe em Windows, o que geraria um erro de compilação. Uma
maneira de resolver isso seria com macros condicionais e usando a função
<code>GetCurrentDirectory</code> do cabeçalho <code>winbase.h</code>.</p>
<p>Essas possíveis melhorias ficam como exercícios para leitor.</p></div><button class="sc-iqseJM fXEOMs"><a>← Voltar</a></button></article></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"id":"2021-12-19-diretorio-atual-em-c","title":"Como ler do sistema de arquivos de um jeito organizado em C","date":"2021-12-19","tags":["c","sistema-de-arquivos"],"excerpt":"Usando getcwd, strcat e strstr","content":"\u003ch2\u003ePré-requisitos\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eAmbiente Linux com GCC\u003c/li\u003e\n\u003cli\u003eConhecimento de ponteiros e strings em C\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eAprendizados:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003egetcwd\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003estrcat\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003estrstr\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003ePoblema\u003c/h2\u003e\n\u003cp\u003ePara a disciplina de Estrutura de Dados 2 (EDA2), eu tenho um\n\u003ca href=\"https://github.com/yudi-azvd/eda2/\"\u003erepositório\u003c/a\u003e com uma estrutura relativamente\ncomplexa para um \"projeto\" em C. Esse repositório vive no meu computador na\npasta \u003ccode\u003e/home/yudi/\u0026#x3C;vários diretórios\u003e/eda2/\u003c/code\u003e, mais ou menos com o seguinte conteúdo:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e.\n├── ... outros arquivos como .gitignore, README.md, etc\n├── 00-revisao/\n├── 01-sorting/\n├── 02-hash/\n├── 04-trees/\n├── 05-heap/\n├── 06-graph\n│   ├── _exercises/\n│   └── list-und-graph\n│       ├── listundgraph.h\n│       └── _tests\n│           ├── listundgraph.test.cpp\n│           └── ...\n└── resources\n    └── algs4-data\n        ├── tinyG.txt\n        ├── tinyCG.txt\n        └── ... outros vários arquivos com amostras de dados\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eEm um dos exercícios do livro, eu tinha que criar um\n\"\u003ca href=\"https://pt.wikipedia.org/wiki/Construtor\"\u003econstrutor\u003c/a\u003e\" que recebe o caminho\nde um arquivo para criar e preencher o grafo, com uma assinatura assim:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-c\"\u003eListUndGraph *\u003cspan class=\"hljs-title hljs-function\"\u003eListUndGraph_create_from_file\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(\u003cspan class=\"hljs-type\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003echar\u003c/span\u003e *filepath)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eQue é chamada nos arquivos em \u003ccode\u003e06-graph/list-und-graph/_tests/\u003c/code\u003e ou\nem \u003ccode\u003e06-graph/_exercises/\u003c/code\u003e.\u003c/p\u003e\n\u003ch2\u003ePrimeiras soluções\u003c/h2\u003e\n\u003cp\u003eA primeira solução que pensei foi a de passar o caminho relativo para o construtor,\nalgo como \u003ccode\u003e\"../../../../resources/algs4-data/tinyG.txt\"\u003c/code\u003e. A quantidade de \u003ccode\u003e../\u003c/code\u003e\nvaria de acordo com o lugar de onde \u003ccode\u003eListUndGraph_create_from_file\u003c/code\u003e é chamado.\nEssa é uma solução viável, mas um tanto incoveniente. O código cliente fica feio\ncom muitos \u003ccode\u003e../\u003c/code\u003e e é chato para o programador ficar \"calculando\" essa quantidade.\u003c/p\u003e\n\u003cp\u003eOutra solução seria passar o caminho absoluto para o construtor. No meu computador,\npor exemplo, esse caminho poderia ser\n\u003ccode\u003e\"/home/yudi/uni/eda2/resources/algs4-data/tinyG.txt\"\u003c/code\u003e. Essa solução, entretanto,\ntraz mais restrições:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eSe por acaso eu precisar mudar o repositório de lugar no meu computador, esse\ncaminho absoluto já não valeria mais\u003c/li\u003e\n\u003cli\u003eSe outra pessoa baixar esse repositório no computador dela, esse caminho absoluto\nfaria menos sentido ainda. Ela teria que ter um username igual a \u003ccode\u003eyudi\u003c/code\u003e e\nbaixar o repositório em \u003ccode\u003e~/uni/\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003eEssa solução polui o projeto com informações do sistema de arquivos que estão\nfora do repositório e não importam pra ele.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eUma solução melhor\u003c/h2\u003e\n\u003cp\u003e\u003cem\u003eAo meu ver pelo menos.\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003ePara o cliente, seria interessante se a chamada do construtor fosse algo assim:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-c\"\u003eListUndGraph *g = ListUndGraph_create_from_file(\u003cspan class=\"hljs-string\"\u003e\"algs4-data/tinyG.txt\"\u003c/span\u003e);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eDessa maneira, o construtor recebe apenas o \u003cem\u003ecaminho relativo\u003c/em\u003e para o arquivo a\npartir de \u003ccode\u003eresources/\u003c/code\u003e e ele se encarrega de resolver o \u003cem\u003ecaminho absoluto\u003c/em\u003e até a\npasta \u003ccode\u003eresources/\u003c/code\u003e ou de chamar alguém que sabe fazê-lo.\u003c/p\u003e\n\u003cp\u003eVamos optar por criar a função \u003ccode\u003evoid get_res_dir(char *res_dir)\u003c/code\u003e que preenche\n\u003ccode\u003eres_dir\u003c/code\u003e com o caminho absoluto até \u003ccode\u003eresources/\u003c/code\u003e e é usada pelo construtor. Como\nbônus, ela ainda pode ser usada por outras funções de qualquer lugar do repositório\ne sua lógica pode ser reaproveitada em outros projetos.\u003c/p\u003e\n\u003cp\u003eComo vamos colocar \u003ccode\u003eget_res_dir\u003c/code\u003e em seu próprio arquivo de cabeçalho (\u003ccode\u003e.h\u003c/code\u003e), ele\nprecisa ser incluído por quem quer usá-lo. Infelizmente, o problema da quantidade\n\u003ccode\u003e../\u003c/code\u003e volta aqui na hora de usar \u003ccode\u003e#include \"../../../get_res_dir.h\"\u003c/code\u003e. Isso pode\nser resolvido com um Makefile ou com um gerador de build system. Configurando\nessas ferramentas apropriadamente, a compilação por debaixo dos panos aconteceria\nmais ou menos assim:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sh\"\u003e\u003cspan class=\"hljs-comment\"\u003e# essa quantidade de \"../\" é apenas para ilustração.\u003c/span\u003e\ngcc -I\u003cspan class=\"hljs-string\"\u003e\"../../../../get_res_dir.h\"\u003c/span\u003e listundgraph.test.cpp -o listundgraph.test.out\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAssim seria possível incluir a função apenas com\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-c\"\u003e\u003cspan class=\"hljs-meta\"\u003e#\u003cspan class=\"hljs-keyword\"\u003einclude\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\"get_res_dir.h\"\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eEu teria que pesquisar mais pra configurar essas ferramentas apropriadamente, mas\ndurante o curso de EDA2 eu não achei necessário fazer o setup de Make ou CMake\npara esses exercícios simples \u003cdel\u003epor preguiça ou falta de paciência pra aprender\u003c/del\u003e.\nAinda assim, vale ressaltar que essa estratégia seria mais adequada em um projeto\nC/C++ de verdade .\u003c/p\u003e\n\u003ch2\u003eSuper pseudocódigo\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-cpp\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-type\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eget_res_dir\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(\u003cspan class=\"hljs-type\"\u003echar\u003c/span\u003e* res_dir)\u003c/span\u003e \u003c/span\u003e{\n  \u003cspan class=\"hljs-comment\"\u003e// pegar caminho absoluto do diretório onde o programa está sendo executado\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e//    exemplo: \"/home/yudi/uni/eda2/06-graph/list-und-graph/_tests/\"\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e// pegar a substring do caminho absoluto até \"eda2\"\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e//   substr: \"/home/yudi/uni/eda2/\"\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e// concatenar a substring com \"resources/\"\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e//   resultado: \"/home/yudi/uni/eda2/resources/\"\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e// (esse resultado deve estar em res_dir no final da função)\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eImplementação de \u003ccode\u003eget_res_dir\u003c/code\u003e\u003c/h2\u003e\n\u003cp\u003ePara pegar o caminho absoluto do diretório eu pesquisei extamente isso no Google.\nComo estou programando em ambiente Linux, a função que foi recomendada foi\n\u003ccode\u003echar* getcwd(char* buf, size_t size)\u003c/code\u003e (get current working directory) do cabeçalho\n\u003ccode\u003eunistd.h\u003c/code\u003e. De acordo com as\n\u003ca href=\"https://man7.org/linux/man-pages/man3/getcwd.3.html\"\u003epáginas do manual\u003c/a\u003e, ela retorna\no diretório em \u003ccode\u003ebuf\u003c/code\u003e, que deve apontar para um espaço previamente alocado.\u003c/p\u003e\n\u003cp\u003eExecutando a essa função no meu computador no diretório\n\u003ccode\u003e/home/yudi/uni/eda2/06-graph/list-und-graph/_tests/\u003c/code\u003e, ela retorna exatamente isso.\nPor prevenção, vamos usar um buffer com o tamanho máximo.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-c\"\u003egetcwd(res_dir, PATH_MAX);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAgora precisamos apenas de uma substring disso tudo: \u003ccode\u003e\"/home/yudi/uni/eda2\"\u003c/code\u003e. Como\ndiretório raíz do repositório, podemos usar a string \u003ccode\u003e\"eda2\"\u003c/code\u003e para extrair a\nsubstring de interesse. É uma suposição razoável porque é o nome do repositório\ne dificilmente vai mudar. Uma solução mais robusta, talvez, seria procurar o próximo\ndiretório pai com a pasta \u003ccode\u003e.git\u003c/code\u003e, mas não vamos por esse caminho nesse post.\u003c/p\u003e\n\u003cp\u003ePara extrair a substring, vamos usar a função\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-c\"\u003e\u003cspan class=\"hljs-type\"\u003echar\u003c/span\u003e* \u003cspan class=\"hljs-title hljs-function\"\u003estrstr\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(\u003cspan class=\"hljs-type\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003echar\u003c/span\u003e *haystack, \u003cspan class=\"hljs-type\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003echar\u003c/span\u003e *needle)\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eQue encontra a primeira ocorrência de \u003ccode\u003eneedle\u003c/code\u003e em \u003ccode\u003ehaystack\u003c/code\u003e e retorna o ponteiro\nque aponta para onde \u003ccode\u003eneedle\u003c/code\u003e foi encontrado.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-c\"\u003e\u003cspan class=\"hljs-type\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003echar\u003c/span\u003e *root_dir_name = \u003cspan class=\"hljs-string\"\u003e\"eda2\"\u003c/span\u003e;\n\u003cspan class=\"hljs-type\"\u003echar\u003c/span\u003e *root_dir_ptr = \u003cspan class=\"hljs-built_in\"\u003estrstr\u003c/span\u003e(res_dir, root_dir_name);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAgora \u003ccode\u003eroot_dir_ptr\u003c/code\u003e aponta para a string \u003ccode\u003e\"eda2/06-graph/list-und-graph/_tests\"\u003c/code\u003e.\nVale ressaltar que não há cópias de strings, \u003ccode\u003eroot_dir_ptr\u003c/code\u003e apenas aponta para\numa região de memória alguns bytes à frente da região de memória apontada por\n\u003ccode\u003eres_dir\u003c/code\u003e, conforme a ilustração abaixo:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e/home/yudi/uni/eda2/06-graph/list-und-graph/_tests/\n↑              ↑\nres_dir        root_dir_ptr\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eComo não precisamos de nada que vem depois de \u003ccode\u003e\"eda2/\"\u003c/code\u003e, podemos desconsiderar\nessa parte colocando o terminador de string \u003ccode\u003e'\\0'\u003c/code\u003e.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-c\"\u003e*(root_dir_ptr + \u003cspan class=\"hljs-built_in\"\u003estrlen\u003c/span\u003e(root_dir_name)) = \u003cspan class=\"hljs-string\"\u003e'\\0'\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAgora \u003ccode\u003eres_dir\u003c/code\u003e aponta para\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e                   Note o '\\0', antes era um '/'\n                   ↓\n/home/yudi/uni/eda2\\006-graph/list-und-graph/_tests/\n↑              ↑\nres_dir        root_dir_ptr\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eQue é o mesmo que:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\n/home/yudi/uni/eda2\n↑              ↑\nres_dir        root_dir_ptr\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAgora só precisamos concatenar \u003ccode\u003e\"/resources\"\u003c/code\u003e ao final de \u003ccode\u003eres_dir\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-c\"\u003e\u003cspan class=\"hljs-type\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003echar\u003c/span\u003e *res = \u003cspan class=\"hljs-string\"\u003e\"/resources\"\u003c/span\u003e;\n\u003cspan class=\"hljs-built_in\"\u003estrcat\u003c/span\u003e(res_dir, res);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eJuntando tudo, a função \u003ccode\u003eget_res_dir\u003c/code\u003e fica assim:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-c\"\u003e\u003cspan class=\"hljs-meta\"\u003e#\u003cspan class=\"hljs-keyword\"\u003einclude\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x3C;unistd.h\u003e\u003c/span\u003e       \u003cspan class=\"hljs-comment\"\u003e// getcwd\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e#\u003cspan class=\"hljs-keyword\"\u003einclude\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x3C;linux/limits.h\u003e\u003c/span\u003e \u003cspan class=\"hljs-comment\"\u003e// PATH_MAX\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"hljs-meta\"\u003e#\u003cspan class=\"hljs-keyword\"\u003einclude\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e\u0026#x3C;string.h\u003e\u003c/span\u003e       \u003cspan class=\"hljs-comment\"\u003e// strstr, strcat, strlen\u003c/span\u003e\u003c/span\u003e\n\n\u003cspan class=\"hljs-comment\"\u003e// Preenche RES_DIR com \"/.../eda2/resources\".\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// \"...\" é o caminho absoluto até \"eda2/\".\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e//\u003c/span\u003e\n\u003cspan class=\"hljs-comment\"\u003e// RES_DIR deve ser um buffer com PATH_MAX bytes.\u003c/span\u003e\n\u003cspan class=\"hljs-type\"\u003evoid\u003c/span\u003e \u003cspan class=\"hljs-title hljs-function\"\u003eget_res_dir\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(\u003cspan class=\"hljs-type\"\u003echar\u003c/span\u003e *res_dir)\u003c/span\u003e\n{\n  getcwd(res_dir, PATH_MAX);\n  \u003cspan class=\"hljs-type\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003echar\u003c/span\u003e *root_dir_name = \u003cspan class=\"hljs-string\"\u003e\"eda2\"\u003c/span\u003e;\n  \u003cspan class=\"hljs-type\"\u003echar\u003c/span\u003e *root_dir_ptr = \u003cspan class=\"hljs-built_in\"\u003estrstr\u003c/span\u003e(res_dir, root_dir_name);\n  *(root_dir_ptr + \u003cspan class=\"hljs-built_in\"\u003estrlen\u003c/span\u003e(root_dir_name)) = \u003cspan class=\"hljs-string\"\u003e'\\0'\u003c/span\u003e;\n  \u003cspan class=\"hljs-type\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003echar\u003c/span\u003e *res = \u003cspan class=\"hljs-string\"\u003e\"/resources\"\u003c/span\u003e;\n  \u003cspan class=\"hljs-built_in\"\u003estrcat\u003c/span\u003e(res_dir, res);\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eImplementação de \u003ccode\u003eListUndGraph_create_from_file\u003c/code\u003e\u003c/h2\u003e\n\u003cp\u003eAgora só falta implementar o construtor de grafos. Vamos alocar um espaço para\no caminho absoluto.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-cpp\"\u003e\u003cspan class=\"hljs-type\"\u003echar\u003c/span\u003e full_filepath[PATH_MAX]; \u003cspan class=\"hljs-comment\"\u003e// com lixo de memória por enquanto\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eExecutando a função \u003ccode\u003eget_res_dir\u003c/code\u003e com \u003ccode\u003efull_filepath\u003c/code\u003e obtemos o seguinte:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-cpp\"\u003e\u003cspan class=\"hljs-built_in\"\u003eget_res_dir\u003c/span\u003e(full_filepath);\n\u003cspan class=\"hljs-comment\"\u003e// full_filepath: \"/home/yudi/uni/eda2/resources\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ePara terminar, precisamos acrescentar uma \u003ccode\u003e\"/\"\u003c/code\u003e e o caminho relativo do arquivo\nque foi passado a \u003ccode\u003eListUndGraph_create_from_file\u003c/code\u003e. Vamos supor que esse caminho\nrelativo é \u003ccode\u003e\"algs4-data/tinyG.txt\"\u003c/code\u003e.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-c\"\u003e\u003cspan class=\"hljs-comment\"\u003e// full_filepath: \"/home/yudi/uni/eda2/resources\"\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003estrcat\u003c/span\u003e(full_filepath, \u003cspan class=\"hljs-string\"\u003e\"/\"\u003c/span\u003e);\n\u003cspan class=\"hljs-comment\"\u003e// full_filepath: \"/home/yudi/uni/eda2/resources/\"\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003estrcat\u003c/span\u003e(full_filepath, filepath);\n\u003cspan class=\"hljs-comment\"\u003e// full_filepath: \"/home/yudi/uni/eda2/resources/algs4-data/tinyG.txt\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eO código do construtor fica assim:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-c\"\u003eListUndGraph *\u003cspan class=\"hljs-title hljs-function\"\u003eListUndGraph_create_from_file\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(\u003cspan class=\"hljs-type\"\u003econst\u003c/span\u003e \u003cspan class=\"hljs-type\"\u003echar\u003c/span\u003e *filepath)\u003c/span\u003e\n{\n  \u003cspan class=\"hljs-type\"\u003echar\u003c/span\u003e full_filepath[PATH_MAX];\n  get_res_dir(full_filepath);\n  \u003cspan class=\"hljs-built_in\"\u003estrcat\u003c/span\u003e(full_filepath, \u003cspan class=\"hljs-string\"\u003e\"/\"\u003c/span\u003e);\n  \u003cspan class=\"hljs-built_in\"\u003estrcat\u003c/span\u003e(full_filepath, filepath);\n\n  \u003cspan class=\"hljs-comment\"\u003e// restante do código para preencher o grafo\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003ePossíveis melhorias\u003c/h2\u003e\n\u003cp\u003eAinda seria possível deixar \u003ccode\u003eListUndGraph_create_from_file\u003c/code\u003e mais interessante,\ncriando uma função que faz o equivalente às últimas três linhas do trecho\nanterior.\u003c/p\u003e\n\u003cp\u003eOutra melhoria seria deixar esse código um pouco mais cross-platform, ou seja,\nque funcione melhor independentemente do sistema operacional. O cabeçalho\n\u003ccode\u003eunistd.h\u003c/code\u003e não existe em Windows, o que geraria um erro de compilação. Uma\nmaneira de resolver isso seria com macros condicionais e usando a função\n\u003ccode\u003eGetCurrentDirectory\u003c/code\u003e do cabeçalho \u003ccode\u003ewinbase.h\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eEssas possíveis melhorias ficam como exercícios para leitor.\u003c/p\u003e"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"2021-12-19-diretorio-atual-em-c"},"buildId":"kOqEUSmO-VoyaZNgwXGXu","assetPrefix":"/blog","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>