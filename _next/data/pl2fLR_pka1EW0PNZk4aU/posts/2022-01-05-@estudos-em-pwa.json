{"pageProps":{"post":{"id":"2022-01-05-@estudos-em-pwa","title":"Estudos em PWA","date":"2022-01-05","tags":["pwa"],"excerpt":"Compilado dos meus achados sobre PWA revirando a internet","content":"<h2>PWA</h2>\n<p><strong>Super útil</strong>: <a href=\"https://github.com/onderceylan/pwa-asset-generator\">PWA asset generator</a></p>\n<p>É possível disponibilizar o PWA em lojas de aplicativos.</p>\n<p><a href=\"https://www.youtube.com/watch?v=sFsRylCQblw\">Progressive Web Apps in 100 Seconds</a>, Fireship</p>\n<p><a href=\"https://www.youtube.com/watch?v=ppwagkhrZJs\">7 Web Features You Didn’t Know Existed</a></p>\n<p>Testei instalar o PWA no meu celular (Samsung Galaxy S20 FE) por dois navegadores:</p>\n<p><strong>Brave Browser</strong>:</p>\n<ul>\n<li>O ícone do navegador aparece no ícone do app.</li>\n<li>A resolução do ícone estava um pouco a desejar, como se tivesse sido um pouco\nesticado</li>\n<li>na listagem de aplicativos abertos, o PWA aparece como uma instância do Brave\nBrowser</li>\n</ul>\n<p><strong>Google Chrome</strong>: Experiência de uso se aproxima mais de uma experiência de\napp nativo.</p>\n<ul>\n<li>o ícone do app não tem o ícone do navegador</li>\n<li>o app é listado na lista de aplicativos, sendo possível até desinstalá-lo\ncomo qualquer outro app.</li>\n<li>na listagem de aplicativos abertos, o PWA aparece como como um aplicativo\nnativo</li>\n<li>o ícone tem uma definição melhor, como se o tamanho apropriado tivesse sido\nescolhido</li>\n</ul>\n<p><strong>Firefox</strong>: Não vi ainda</p>\n<p>iOS</p>\n<p>O aplicativo não funcionou no iPhone de uma amiga, mas acho que não é por conta\nda parte de PWA, por que eu nem tinha colocado coisa no projeto referente a isso.</p>\n<h2>Workbox e <code>generateSW</code></h2>\n<ul>\n<li><a href=\"https://developers.google.com/web/tools/workbox/guides/get-started\">Workbox</a></li>\n<li><a href=\"https://developers.google.com/web/tools/workbox/modules/workbox-cli\">generateSW</a></li>\n</ul>\n<p>Gerador de Service Worker de linha de comando. <code>generateSW</code> é limitado para os\ncasos:</p>\n<ul>\n<li>You want to precache files.</li>\n<li>You have simple runtime configuration needs (e.g. the configuration allows you to define routes and strategies).</li>\n</ul>\n<p>Mas não sei qual é o escopo do meu futuro caso de uso (PWA pra controlar a fita\nde LED), mas deve ser o suficiente.</p>\n<h2>Snowpack + TypeScript + Workbox</h2>\n<p>Consegui fazer deploy de um PWA.</p>\n<p>Com o Workbox, vi que a parte PWA \"só funciona\" em produção quando estão\nsendo servidos os arquivos do diretório de build. O aplicativo é instalável\nquando o app está hospedado no GitHub Pages ou na Vercel, mas não consegui\nreproduzir isso em ambiente de desenvolvimento (localhost). O Snowpack reclama\nde não encontrar o <code>sw.js</code>, o que faz sentido já que ele é gerado pelo Workbox\nno diretório de build.</p>\n<p>É possível visitá-lo <a href=\"https://vercel.com/yudi-azvd/bedtime-calculator\">aqui</a>.\nHospedado na Vercel por enquanto.</p>\n<p>Ainda não consegui montar um ambiente depuração com VSCode.</p>\n<h2>Webpack + TypeScript + Workbox</h2>\n<p>Nem toquei ainda, mas o Webpack tem uma\n<a href=\"https://webpack.js.org/guides/progressive-web-application/\">página</a> pra isso. Também usam Workbox.</p>\n<p>Meu chute é que o ambiente de desenvolvimento com VSCode vai ser mais fácil.</p>\n<h2>Parcel + TypeScript</h2>\n<p>Não consegui fazer o service worker funcionar sem nenhuma ferramenta adicional.\nAparentemente larguei cedo demais, por que acho que dava pra encaixar com WorkBox\ntambém, segundo esse <a href=\"https://www.bha.ee/how-to-make-your-parcel-js-app-progressive/\">post</a>. Nada muito diferente do Snowpack\ne Webpack. Esse post usa React.</p>\n<h2>Svelte</h2>\n<p>Aparentemente tem uma integração mais \"seamless\" com service workers.</p>\n<pre><code class=\"hljs language-js\"><span class=\"hljs-comment\">// service-worker.js</span>\n<span class=\"hljs-keyword\">import</span> { build, files, timestamp } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'$service-worker'</span>\n</code></pre>\n<p><a href=\"https://blog.logrocket.com/building-a-pwa-with-svelte/\">Building a PWA with Svelte (Svelte, SvelteKit e Sapper)</a>,\nLogRocket</p>\n<p><a href=\"https://dev.to/100lvlmaster/create-a-pwa-with-sveltekit-svelte-a36\">Create a PWA with Sveltekit</a></p>\n<h2>Referências</h2>\n<p>(Indicar o repositório inicial onde tem vários links)</p>"}},"__N_SSG":true}